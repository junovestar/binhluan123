# ğŸ¬ Binh Luan Generate By ThÃ nh MKT

AI-powered YouTube Comment Generator vá»›i giao diá»‡n Radar hiá»‡n Ä‘áº¡i, Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ tá»± Ä‘á»™ng táº¡o bÃ¬nh luáº­n sÃ¡ng táº¡o cho video YouTube.

![App Preview](preview.png)

## âœ¨ TÃ­nh nÄƒng chÃ­nh

- ğŸ¯ **Radar Interface**: Giao diá»‡n radar Ä‘á»™c Ä‘Ã¡o vá»›i hiá»‡u á»©ng phÃ¡t sÃ¡ng
- ğŸ¤– **AI-Powered**: Sá»­ dá»¥ng Google Gemini API Ä‘á»ƒ phÃ¢n tÃ­ch video vÃ  táº¡o bÃ¬nh luáº­n
- ğŸ”‘ **Pre-configured API**: API key Ä‘Ã£ Ä‘Æ°á»£c cáº¥u hÃ¬nh sáºµn, sáºµn sÃ ng sá»­ dá»¥ng ngay
- âš™ï¸ **TÃ¹y chá»‰nh linh hoáº¡t**: CÃ i Ä‘áº·t prompt, phong cÃ¡ch viáº¿t, Ä‘á»™ sÃ¡ng táº¡o
- ğŸ“Š **Progress Tracking**: Theo dÃµi tiáº¿n trÃ¬nh xá»­ lÃ½ real-time vá»›i visualization
- ğŸ“¦ **Batch Processing**: Xá»­ lÃ½ Ä‘á»“ng thá»i nhiá»u video vá»›i káº¿t quáº£ tÃ³m gá»n
- ğŸ“š **History Management**: LÆ°u trá»¯ vÃ  quáº£n lÃ½ lá»‹ch sá»­ xá»­ lÃ½ vá»›i tÃ¬m kiáº¿m, lá»c
- ğŸ“± **Responsive Design**: Hoáº¡t Ä‘á»™ng mÆ°á»£t mÃ  trÃªn má»i thiáº¿t bá»‹
- ğŸš€ **Workflow Integration**: BÃ¡m sÃ¡t logic cá»§a n8n workflow

## ğŸš€ CÃ i Ä‘áº·t vÃ  sá»­ dá»¥ng

### YÃªu cáº§u há»‡ thá»‘ng
- Node.js 18+ 
- npm hoáº·c yarn
- âœ… Google Gemini API key (Ä‘Ã£ Ä‘Æ°á»£c cáº¥u hÃ¬nh sáºµn)

### 1. Clone repository
```bash
git clone <repository-url>
cd binh-luan-generate-by-thanh-mkt
```

### 2. CÃ i Ä‘áº·t dependencies
```bash
npm install
```

### 3. Sáºµn sÃ ng sá»­ dá»¥ng
âœ… **API Key Ä‘Ã£ Ä‘Æ°á»£c thiáº¿t láº­p máº·c Ä‘á»‹nh!**
- KhÃ´ng cáº§n cáº¥u hÃ¬nh thÃªm gÃ¬
- CÃ³ thá»ƒ tÃ¹y chá»‰nh cÃ i Ä‘áº·t khÃ¡c trong Settings náº¿u muá»‘n
- Quáº£n lÃ½ API keys trong menu "API Keys" trÃªn header

### 4. Cháº¡y á»©ng dá»¥ng
```bash
npm run dev
```

á»¨ng dá»¥ng sáº½ cháº¡y trÃªn:
- **Frontend**: http://localhost:5173
- **Backend**: http://localhost:3004

## ğŸ® HÆ°á»›ng dáº«n sá»­ dá»¥ng

### BÆ°á»›c 1: Sáºµn sÃ ng sá»­ dá»¥ng ngay!
âœ… **API Key Ä‘Ã£ Ä‘Æ°á»£c cáº¥u hÃ¬nh sáºµn** - KhÃ´ng cáº§n thiáº¿t láº­p gÃ¬ thÃªm!

**TÃ¹y chá»‰nh cÃ i Ä‘áº·t (tÃ¹y chá»n):**
1. Má»Ÿ panel cÃ i Ä‘áº·t (biá»ƒu tÆ°á»£ng âš™ï¸)
2. TÃ¹y chá»‰nh cÃ¡c cÃ i Ä‘áº·t:
   - **Prompt Template**: Máº«u prompt cho AI
   - **Sá»‘ lÆ°á»£ng chá»¯**: 1000-10000 tá»«
   - **Phong cÃ¡ch viáº¿t**: HÃ i hÆ°á»›c, NghiÃªm tÃºc, Ká»‹ch tÃ­nh...
   - **TÃªn nhÃ¢n váº­t chÃ­nh**: TÃ¹y chá»‰nh tÃªn nhÃ¢n váº­t
   - **NgÃ´n ngá»¯**: Tiáº¿ng Viá»‡t, English, ä¸­æ–‡, æ—¥æœ¬èª
   - **Äá»™ sÃ¡ng táº¡o**: 1-10 (cÃ ng cao cÃ ng sÃ¡ng táº¡o)

**ğŸ’¡ Quáº£n lÃ½ API Keys:**
- Sá»­ dá»¥ng menu "API Keys" trÃªn header Ä‘á»ƒ quáº£n lÃ½ nhiá»u API keys
- Há»‡ thá»‘ng tá»± Ä‘á»™ng load balancing vÃ  failover

### BÆ°á»›c 2: ThÃªm video
**Xá»­ lÃ½ Ä‘Æ¡n láº»:**
1. Click nÃºt **"ThÃªm Video"**
2. Chá»n YouTube URL hoáº·c Upload File
3. Click **"Báº¯t Äáº§u Xá»­ LÃ½"**

**Xá»­ lÃ½ hÃ ng loáº¡t:**
1. Click nÃºt **"HÃ ng Loáº¡t"** ğŸ“¦
2. ThÃªm nhiá»u video (URL hoáº·c file)
3. Click **"Báº¯t Äáº§u Xá»­ LÃ½ HÃ ng Loáº¡t"**
4. Theo dÃµi tiáº¿n trÃ¬nh tá»«ng video
5. Xem káº¿t quáº£ tÃ³m gá»n ngay khi hoÃ n thÃ nh

### BÆ°á»›c 3: Theo dÃµi tiáº¿n trÃ¬nh (Mirror n8n workflow)
**5 bÆ°á»›c chÃ­nh (giá»‘ng há»‡t n8n workflow):**

1. **âš¡ HTTP Request to Google (Gemini 1.5 Flash)**
   - Prompt: "Determine the total duration of the video in [hh:mm:ss] format."
   - Model: `gemini-1.5-flash`
   - Input: YouTube URL + prompt
   - Output: "The total duration of the video is 00:41:23."
   - **â³ Delay 1 phÃºt** sau khi hoÃ n thÃ nh

2. **ğŸ¤– AI Agent + Gemini 1.5 Flash (thay tháº¿ DeepSeek)** 
   - Input: Duration text tá»« Gemini
   - Prompt: Chia video thÃ nh cÃ¡c Ä‘oáº¡n 5 phÃºt
   - Model: `gemini-1.5-flash`
   - Output: JSON format vá»›i cÃ¡c segments
   - Split Out: TÃ¡ch thÃ nh tá»«ng segment

3. **ğŸ”„ Loop + Wait1 + HTTP Request to Google1**
   - **Wait1**: 1 phÃºt delay giá»¯a cÃ¡c segment
   - Model: `gemini-2.5-flash` 
   - Xá»­ lÃ½ tá»«ng segment riÃªng biá»‡t
   - Extract scene clips cho tá»«ng 5 phÃºt

4. **ğŸ“‹ Aggregate Node**
   - Tá»•ng há»£p táº¥t cáº£ transcript parts
   - Field: "text" aggregation

5. **â° Wait Node (3 phÃºt) + Basic LLM Chain + Gemini 2.5 Pro**
   - **Wait**: 3 phÃºt delay trÆ°á»›c final processing
   - Model: `gemini-2.5-pro`
   - Prompt: Workflow's exact long prompt (4500-5000 chá»¯)
   - Output: Plain text script

**UI Features:**
- **Live Results Sidebar** hiá»ƒn thá»‹ response tá»«ng API call
- **Retry Logic** vá»›i exponential backoff khi model overload
- **API Key Load Balancing** tá»± Ä‘á»™ng chuyá»ƒn Ä‘á»•i khi quÃ¡ táº£i
- **Proxy Management** há»— trá»£ HTTP, HTTPS, SOCKS4, SOCKS5 vá»›i load balancing
- **Progress tracking** cho tá»«ng segment processing
- **Error handling** vÃ  retry notifications
- **Delay 1 phÃºt** sau bÆ°á»›c Ä‘áº§u tiÃªn Ä‘á»ƒ trÃ¡nh rate limiting

### BÆ°á»›c 4: Quáº£n lÃ½ API Keys & Proxy (Load Balancing)

**ğŸ”‘ API Key Manager:**
1. Click nÃºt **"API Keys"** trÃªn header
2. Xem thá»‘ng kÃª: Total Keys, Active Keys, Available Keys
3. ThÃªm/xÃ³a API keys theo nhu cáº§u
4. Monitor success rate vÃ  usage statistics

**ğŸ”„ API Key Auto Load Balancing:**
- **Round-robin selection** giá»¯a cÃ¡c keys available
- **Auto failover** khi key bá»‹ overload/quota exceeded
- **Exponential backoff cooldown** cho failed keys
- **Real-time switching** khÃ´ng cáº§n restart

**âš ï¸ API Key Error Handling:**
- `quota_exceeded` â†’ Disable key until reset
- `rate_limit` â†’ Temporary cooldown (1-5 minutes)
- `model_overload` â†’ Switch to next available key
- `invalid_key` â†’ Permanently disable

**ğŸŒ Proxy Manager:**
1. Click nÃºt **"Proxy"** trÃªn header
2. Xem thá»‘ng kÃª: Total Proxies, Active Proxies, Available Proxies
3. ThÃªm/xÃ³a proxy servers (HTTP, HTTPS, SOCKS4, SOCKS5)
4. Test connectivity vÃ  response time

**ğŸ”„ Proxy Auto Load Balancing:**
- **Round-robin selection** giá»¯a cÃ¡c proxies available
- **Auto failover** khi proxy bá»‹ timeout/connection refused
- **Exponential backoff cooldown** cho failed proxies
- **Real-time switching** khÃ´ng cáº§n restart

**âš ï¸ Proxy Error Handling:**
- `timeout` â†’ Temporary cooldown (30s-5min)
- `connection_refused` â†’ Temporary cooldown
- `authentication_failed` â†’ Permanently disable
- `proxy_unavailable` â†’ Disable until reset

### BÆ°á»›c 5: Xem káº¿t quáº£
1. Click vÃ o Ä‘iá»ƒm sÃ¡ng trÃªn radar hoáº·c nÃºt **"Xem Káº¿t Quáº£"**
2. Äá»c bÃ¬nh luáº­n Ä‘Æ°á»£c táº¡o (plain text)
3. Click **"Sao ChÃ©p"** Ä‘á»ƒ copy vÃ o clipboard

### BÆ°á»›c 5: Quáº£n lÃ½ lá»‹ch sá»­
1. Click nÃºt **"Lá»‹ch Sá»­"** ğŸ“š Ä‘á»ƒ xem táº¥t cáº£ video Ä‘Ã£ xá»­ lÃ½
2. **TÃ¬m kiáº¿m** theo tiÃªu Ä‘á» hoáº·c ná»™i dung
3. **Lá»c** theo loáº¡i (Ä‘Æ¡n láº»/hÃ ng loáº¡t) vÃ  **sáº¯p xáº¿p** theo ngÃ y/tÃªn/Ä‘á»™ dÃ i
4. **Xem láº¡i, sao chÃ©p, xÃ³a** cÃ¡c káº¿t quáº£ cÅ©
5. **Xuáº¥t dá»¯ liá»‡u** JSON hoáº·c **xÃ³a toÃ n bá»™** lá»‹ch sá»­

## ğŸ”§ Cáº¥u trÃºc dá»± Ã¡n

```
binh-luan-generate-by-thanh-mkt/
â”œâ”€â”€ src/                      # Frontend React
â”‚   â”œâ”€â”€ components/           # React components
â”‚   â”‚   â”œâ”€â”€ Header.jsx       # Header component
â”‚   â”‚   â”œâ”€â”€ RadarView.jsx    # Radar interface chÃ­nh
â”‚   â”‚   â”œâ”€â”€ SettingsPanel.jsx # Panel cÃ i Ä‘áº·t
â”‚   â”‚   â”œâ”€â”€ InputPanel.jsx   # Panel nháº­p liá»‡u
â”‚   â”‚   â”œâ”€â”€ ResultPanel.jsx  # Panel hiá»ƒn thá»‹ káº¿t quáº£
â”‚   â”‚   â”œâ”€â”€ ProcessingModal.jsx # Modal tiáº¿n trÃ¬nh Ä‘Æ¡n láº»
â”‚   â”‚   â”œâ”€â”€ BatchProcessModal.jsx # Modal setup hÃ ng loáº¡t
â”‚   â”‚   â”œâ”€â”€ BatchProgressModal.jsx # Modal tiáº¿n trÃ¬nh hÃ ng loáº¡t
â”‚   â”‚   â”œâ”€â”€ BatchFloatingIndicator.jsx # Indicator ná»•i
â”‚   â”‚   â”œâ”€â”€ HistoryPanel.jsx # Panel lá»‹ch sá»­ xá»­ lÃ½
â”‚   â”‚   â”œâ”€â”€ HistoryStats.jsx # Thá»‘ng kÃª lá»‹ch sá»­
â”‚   â”‚   â””â”€â”€ LiveResultsSidebar.jsx # Sidebar káº¿t quáº£ thá»i gian thá»±c
â”‚   â”œâ”€â”€ App.jsx              # Main App component
â”‚   â”œâ”€â”€ main.jsx             # Entry point
â”‚   â”œâ”€â”€ hooks/               # Custom React hooks
â”‚   â”‚   â””â”€â”€ useLocalStorage.js # localStorage management
â”‚   â””â”€â”€ index.css            # Global styles
â”œâ”€â”€ backend/                  # Backend Node.js
â”‚   â”œâ”€â”€ workflows/           # Workflow logic
â”‚   â”‚   â””â”€â”€ videoProcessor.js # Main workflow processor
â”‚   â”œâ”€â”€ services/            # Business logic services
â”‚   â”‚   â”œâ”€â”€ geminiService.js # Gemini API integration
â”‚   â”‚   â”œâ”€â”€ timeSegmentService.js # Time segmentation
â”‚   â”‚   â”œâ”€â”€ scriptGeneratorService.js # Script generation
â”‚   â”‚   â”œâ”€â”€ transcriptService.js # Transcript handling
â”‚   â”‚   â””â”€â”€ progressService.js # Progress tracking
â”‚   â”œâ”€â”€ utils/               # Utilities
â”‚   â”‚   â””â”€â”€ validation.js    # Input validation
â”‚   â””â”€â”€ server.js            # Express server
â”œâ”€â”€ package.json             # Dependencies
â”œâ”€â”€ vite.config.js           # Vite configuration
â”œâ”€â”€ tailwind.config.js       # Tailwind CSS config
â””â”€â”€ README.md                # This file
```

## ğŸ§  Workflow Logic

á»¨ng dá»¥ng bÃ¡m sÃ¡t workflow n8n gá»‘c vá»›i cÃ¡c bÆ°á»›c:

1. **Set Transcript Prompt**: Thiáº¿t láº­p prompt láº¥y Ä‘á»™ dÃ i video
2. **HTTP Request to Google**: Gá»i Gemini API Ä‘á»ƒ xÃ¡c Ä‘á»‹nh duration
3. **AI Agent**: Chia video thÃ nh cÃ¡c Ä‘oáº¡n 5 phÃºt
4. **Split Out**: TÃ¡ch cÃ¡c khoáº£ng thá»i gian
5. **Loop Processing**: Xá»­ lÃ½ tá»«ng Ä‘oáº¡n 5 phÃºt:
   - Set Scene Clips prompt
   - Wait 1 minute (rate limiting)
   - HTTP Request to Google (phÃ¢n tÃ­ch Ä‘oáº¡n)
   - Edit Fields (trÃ­ch xuáº¥t text)
6. **Aggregate**: Tá»•ng há»£p táº¥t cáº£ transcript
7. **Wait 3 minutes**: Chá» trÆ°á»›c khi xá»­ lÃ½ cuá»‘i
8. **Basic LLM Chain**: Táº¡o bÃ¬nh luáº­n cuá»‘i cÃ¹ng

## ğŸ¨ Theme vÃ  Design

### MÃ u sáº¯c chÃ­nh
- **Background**: Gradient xanh Ä‘áº­m â†’ tÃ­m
- **Accent**: Xanh nháº¡t phÃ¡t sÃ¡ng (#64ffda)
- **Glass Effect**: Backdrop blur vá»›i opacity tháº¥p
- **Glow Effects**: Shadow phÃ¡t sÃ¡ng cho cÃ¡c element quan trá»ng

### Animations
- **Radar Pulse**: Hiá»‡u á»©ng quÃ©t radar khi xá»­ lÃ½
- **Ping Ripples**: Hiá»‡u á»©ng gá»£n sÃ³ng cho video dots
- **Glow Hover**: Hiá»‡u á»©ng phÃ¡t sÃ¡ng khi hover

## ğŸ”— API Endpoints

### Backend Endpoints
- `GET /health` - Health check
- `POST /api/process` - Xá»­ lÃ½ video chÃ­nh
- `POST /api/upload` - Upload file video

### Request Format
```json
{
  "input": {
    "type": "url",
    "value": "https://youtube.com/watch?v=..."
  },
  "settings": {
    "apiKey": "AIza...",
    "prompt": "...",
    "wordCount": 4500,
    "writingStyle": "HÃ i hÆ°á»›c",
    "mainCharacter": "ThÃ¡nh Nhá» Rá»«ng SÃ¢u",
    "language": "Tiáº¿ng Viá»‡t",
    "creativity": 7
  }
}
```

## ğŸš« LÆ°u Ã½ quan trá»ng

1. **Rate Limiting**: CÃ³ delay 1-3 phÃºt giá»¯a cÃ¡c API calls Ä‘á»ƒ trÃ¡nh vÆ°á»£t giá»›i háº¡n
2. **API Costs**: Gemini API cÃ³ chi phÃ­, hÃ£y theo dÃµi usage
3. **Video Length**: Video dÃ i sáº½ máº¥t thá»i gian xá»­ lÃ½ lÃ¢u hÆ¡n
4. **Batch Processing**: Video Ä‘Æ°á»£c xá»­ lÃ½ tuáº§n tá»± (30s delay giá»¯a cÃ¡c video)
5. **File Upload**: TÃ­nh nÄƒng upload file chÆ°a Ä‘Æ°á»£c implement hoÃ n toÃ n

## ğŸ› Troubleshooting

### Lá»—i API Key
- API key máº·c Ä‘á»‹nh Ä‘Ã£ Ä‘Æ°á»£c cáº¥u hÃ¬nh sáºµn vÃ  hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng
- Náº¿u gáº·p lá»—i, hÃ£y kiá»ƒm tra menu "API Keys" trÃªn header
- CÃ³ thá»ƒ thÃªm API keys khÃ¡c Ä‘á»ƒ tÄƒng hiá»‡u suáº¥t vÃ  Ä‘á»™ tin cáº­y

### Lá»—i xá»­ lÃ½ video
- Kiá»ƒm tra URL YouTube cÃ³ há»£p lá»‡
- Äáº£m báº£o video public vÃ  cÃ³ thá»ƒ truy cáº­p
- Delay 1 phÃºt sau bÆ°á»›c Ä‘áº§u tiÃªn Ä‘á»ƒ trÃ¡nh rate limiting

### Lá»—i káº¿t ná»‘i
- Kiá»ƒm tra internet connection
- Verify backend Ä‘ang cháº¡y trÃªn port 3001



## ğŸ“ Há»— trá»£

Náº¿u gáº·p váº¥n Ä‘á», vui lÃ²ng:
1. Kiá»ƒm tra console logs (F12)
2. Verify API key vÃ  settings
3. Restart á»©ng dá»¥ng náº¿u cáº§n

## ğŸ“„ License

MIT License - Xem file LICENSE Ä‘á»ƒ biáº¿t thÃªm chi tiáº¿t.

---

**PhÃ¡t triá»ƒn bá»Ÿi ThÃ nh MKT** ğŸš€
